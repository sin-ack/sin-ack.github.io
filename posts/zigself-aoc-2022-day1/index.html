<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">


<meta name="author" content="sin-ack">



<meta name="description" content="Hi there. I had mentioned that I would be solving AoC puzzles this year with
ZigSelf. I plan to commit to it as much as possible, but no promises. :^)
The first day of AoC has always been quite easy, and today is no exception, so
this was rather simple.">




<meta name="keywords" content=" self  blog ">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="AoC 2022 in ZigSelf, day 1" />
<meta name="twitter:description" content="Hi there. I had mentioned that I would be solving AoC puzzles this year with
ZigSelf. I plan to commit to it as much as possible, but no promises. :^)
The first day of AoC has always been quite easy, and today is no exception, so
this was rather simple." />


<link rel="canonical" href="https://sin-ack.github.io/posts/zigself-aoc-2022-day1/">


<link media="screen" rel="stylesheet" href='https://sin-ack.github.io/css/common.css'>
<link media="screen" rel="stylesheet" href='https://sin-ack.github.io/css/content.css'>
<link media="screen" rel="stylesheet" href='https://sin-ack.github.io/css/highlight.css'>



<title>AoC 2022 in ZigSelf, day 1 - sin-ack&#39;s writings</title>





  <link rel="stylesheet" href='https://sin-ack.github.io/css/single.css'>
</head>

<body>
  <div id="wrapper">
    <header id="header">
  <h1>
    <a href="https://sin-ack.github.io/">sin-ack&#39;s writings</a>
  </h1>

  <nav>
    
    <span class="nav-bar-item">
      <a class="link" href="/posts/">Archives</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/index.xml">RSS Feed</a>
    </span>
    
  </nav>
</header>

    <main id="main" class="post">
      
      
      
      <h1>AoC 2022 in ZigSelf, day 1</h1>
      
      <div>
        <b>Keywords: </b>
        
        <a class="link" href='https://sin-ack.github.io/tags/zigself'>#zigself</a>
        
        <a class="link" href='https://sin-ack.github.io/tags/advent-of-code'>#advent-of-code</a>
        
      </div>
      
      <div class="content">
        <p>Hi there. I had mentioned that I would be solving AoC puzzles this year with
ZigSelf. I plan to commit to it as much as possible, but no promises. :^)</p>
<p>The first day of AoC has always been quite easy, and today is no exception, so
this was rather simple.</p>
<p>You can see the <a href="https://github.com/sin-ack/zigself-advent-of-code/blob/893eb9f51c2d925ba41076382187812bb7cd2f61/2022/day1/solve.self">source code
here</a>,
or in the below section.</p>
<details>
<summary>Source code listing</summary>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-smalltalk" data-lang="smalltalk"><span class="line"><span class="cl"><span class="s">&#39;../../../objects/everything.self&#39;</span> <span class="o">_</span><span class="err">RunScript</span>.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">(<span class="err">|</span>
</span></span><span class="line"><span class="cl">    <span class="nv">parent</span><span class="nf">*</span> <span class="err">=</span> <span class="nv">std</span> <span class="nf">traits</span> <span class="nf">singleton</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&#34;Put input.txt in your cwd&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">input</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">eachSum:</span> <span class="nv">block</span> <span class="err">=</span> (
</span></span><span class="line"><span class="cl">        <span class="nv">input</span> <span class="nf">splitBy:</span> <span class="s">&#39;\n\n&#39;</span><span class="p">;</span> <span class="nf">each:</span> [<span class="o">|</span> <span class="err">:</span><span class="nv">group</span><span class="p">.</span> <span class="nv">sum</span> <span class="nf">|</span>
</span></span><span class="line"><span class="cl">            <span class="nf">sum:</span> <span class="nv">0</span>.
</span></span><span class="line"><span class="cl">            [<span class="o">|</span> <span class="err">:</span><span class="nv">break</span> <span class="nf">|</span>
</span></span><span class="line"><span class="cl">                <span class="nv">group</span> <span class="nf">splitBy:</span> <span class="s">&#39;\n&#39;</span><span class="p">;</span> <span class="nf">each:</span> [<span class="o">|</span> <span class="err">:</span><span class="nv">item</span> <span class="nf">|</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">item</span> <span class="nf">=</span> <span class="s">&#39;&#39;</span> <span class="nb">ifTrue:</span> <span class="nv">break</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">                    <span class="nf">sum:</span> <span class="nv">sum</span> <span class="err">+</span> <span class="nv">item</span> <span class="nf">asInteger</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">                ]<span class="p">.</span>
</span></span><span class="line"><span class="cl">            ] <span class="nf">break</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nv">block</span> <span class="nf">value:</span> <span class="nv">sum</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">        ]<span class="p">.</span>
</span></span><span class="line"><span class="cl">    )<span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">part1</span> <span class="nf">=</span> (<span class="err">|</span> <span class="nv">maxCalories</span><span class="p">.</span> <span class="err">|</span>
</span></span><span class="line"><span class="cl">        <span class="nf">maxCalories:</span> <span class="nv">0</span>.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="err">eachSum:</span> [<span class="o">|</span> <span class="err">:</span><span class="nv">sum</span> <span class="nf">|</span>
</span></span><span class="line"><span class="cl">            <span class="nv">sum</span> <span class="nf">&gt;</span> <span class="nv">maxCalories</span> <span class="nb">ifTrue:</span> [ <span class="nf">maxCalories:</span> <span class="nv">sum</span> ]<span class="p">.</span>
</span></span><span class="line"><span class="cl">        ]<span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">maxCalories</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">    )<span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">part2</span> <span class="nf">=</span> (<span class="err">|</span> <span class="nv">calorieTotals</span><span class="p">.</span> <span class="err">|</span>
</span></span><span class="line"><span class="cl">        <span class="nf">calorieTotals:</span> <span class="nv">std</span> <span class="nv">vector</span> <span class="nf">copyRemoveAll</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="err">eachSum:</span> [<span class="o">|</span> <span class="err">:</span><span class="nv">sum</span> <span class="nf">|</span>
</span></span><span class="line"><span class="cl">            <span class="nv">calorieTotals</span> <span class="nf">add:</span> <span class="nv">sum</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">        ]<span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">calorieTotals</span> <span class="nf">sort</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">        <span class="nv">calorieTotals</span> <span class="nf">reverse</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">        <span class="nv">calorieTotals</span> <span class="nf">copyFrom:</span> <span class="m">0</span> <span class="nf">To:</span> <span class="m">3</span><span class="p">;</span> <span class="nf">fold:</span> [<span class="o">|</span> <span class="err">:</span><span class="nv">acc</span><span class="p">.</span> <span class="err">:</span><span class="nv">item</span> <span class="nf">|</span> <span class="nv">acc</span> <span class="nf">+</span> <span class="nv">item</span>] <span class="nf">Initial:</span> <span class="m">0</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">    )<span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">run</span> <span class="nf">=</span> (
</span></span><span class="line"><span class="cl">        <span class="err">input:</span> (<span class="nv">std</span> <span class="nf">file</span> <span class="nf">open:</span> <span class="s">&#39;input.txt&#39;</span><span class="p">;</span> <span class="nf">readAll</span>)<span class="p">.</span>
</span></span><span class="line"><span class="cl">        <span class="nv">part1</span> <span class="nf">asString</span> <span class="nf">printLine</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">        <span class="nv">part2</span> <span class="nf">asString</span> <span class="nf">printLine</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">    )<span class="p">.</span>
</span></span><span class="line"><span class="cl"><span class="err">|</span>) <span class="nf">run</span><span class="p">.</span>
</span></span></code></pre></div></details>
<br />
<p>The main problem I had was that we were missing various vector primitives such
as sorting or reversing. Those are now in master as part of <code>std vector</code>. They
will eventually be lifted up to the collection level so that every collection
benefits from them; however, the main issue there is the fact that, for example,
the sorting operation requires a collection to both be mutable and indexable,
and we don&rsquo;t have a mixin type that adds both of them together yet.</p>
<p>Additionally, performance is not very good overall, particularly because no
attention to optimization has been given yet. On release mode, calculating the
result with my input takes 1.30s on my machine.</p>
<p>ZigSelf commits:</p>
<ul>
<li><a href="https://github.com/sin-ack/zigself/commit/771b1dc1d5b2a1acea48a89c06d35328480eb222">objects: Implement std vector sort</a></li>
<li><a href="https://github.com/sin-ack/zigself/commit/bcb088de8db749b112bedf3a3f51d572cb39b7eb">objects: Implement std vector reverse</a></li>
<li><a href="https://github.com/sin-ack/zigself/commit/632a5b584ae467c36bcab9ecc200476d1ff2b132">objects: Implement std vector copyFrom:To:</a></li>
</ul>
      </div>
      <div class="paginator">
        
        <a class="link" href="https://sin-ack.github.io/posts/zigself-actor/">← prev</a>
        
        
        <a></a>
        
      </div>
      <div class="comment">
        
      </div>
      
    </main>
    <footer id="footer">
  <div>
    <span>© 2019</span> - <span>2022</span>
  </div>

  <div>
    <span>Powered by </span>
    <a class="link" href="https://gohugo.io/">Hugo</a>
    <span> 🍦 Theme </span>
    <a class="link" href="https://github.com/queensferryme/hugo-theme-texify">TeXify</a>
    <span> + </span>
    <a class="link" href="https://github.com/sin-ack/hugo-theme-texify">some changes</a>
  </div>

  <div class="footnote">
    <span></span>
  </div>
</footer>

  </div>
  

<link media="screen" rel="stylesheet" href="https://sin-ack.github.io/css/custom.css" />





</body>

</html>
